<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kroxxuuuuuu - File Converter</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo">Kroxx</h1>
            <p class="tagline">Image & PDF Converter</p>
            <!-- External Link Button -->
            <a href="https://word-counter.kroxx.dev/" target="_blank" class="external-link-btn" title="Go to another site">
                <span>Word Counter</span>
                <svg viewBox="0 0 20 20" width="18" height="18" style="margin-left: 0.5em; vertical-align: middle;"><path fill="currentColor" d="M14 3a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V6.41l-7.3 7.3a1 1 0 0 1-1.4-1.42l7.3-7.3H11a1 1 0 1 1 0-2h4z"></path><path fill="currentColor" d="M5 5a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2H7.41l7.3 7.3a1 1 0 0 1-1.42 1.4l-7.3-7.3V11a1 1 0 1 1-2 0V5z" opacity=".5"></path></svg>
            </a>
            
            <!-- Authentication Section -->
            <div class="auth-section" id="authSection">
                <!-- Login Button (shown when not authenticated) -->
                <div class="auth-login" id="authLogin" style="display: none;">
                    <a href="/auth/github" class="github-login-btn">
                        <svg class="github-icon" viewBox="0 0 16 16" width="20" height="20">
                            <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                        </svg>
                        Sign in with GitHub
                    </a>
                </div>
                
                <!-- User Profile (shown when authenticated) -->
                <div class="auth-profile" id="authProfile" style="display: none;">
                    <div class="user-info">
                        <img class="user-avatar" id="userAvatar" src="" alt="User Avatar">
                        <div class="user-details">
                            <span class="user-name" id="userName"></span>
                            <span class="user-username" id="userUsername"></span>
                        </div>
                    </div>
                    <button class="logout-btn" id="logoutBtn" title="Sign out">
                        <svg viewBox="0 0 16 16" width="16" height="16">
                            <path fill="currentColor" d="M2 2.75C2 1.784 2.784 1 3.75 1h2.5a.75.75 0 010 1.5h-2.5a.25.25 0 00-.25.25v10.5c0 .138.112.25.25.25h2.5a.75.75 0 010 1.5h-2.5A1.75 1.75 0 012 13.25V2.75zm10.44 4.5l-1.97-1.97a.75.75 0 10-1.06 1.06L10.69 7.5H6a.75.75 0 000 1.5h4.69l-1.22 1.22a.75.75 0 101.06 1.06l1.97-1.97a.75.75 0 000-1.06z"/>
                        </svg>
                    </button>
                </div>
            </div>

            <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                üåô
            </button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Section -->
            <section class="upload-section" id="uploadSection">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <div class="upload-icon">üìÅ</div>
                        <h2>Drop your files here</h2>
                        <p>or click to browse</p>
                        <p class="supported-formats">
                            <strong>Supported formats:</strong><br>
                            Images: JPG, PNG, WebP, BMP, GIF, TIFF, HEIC<br>
                            Documents: PDF
                        </p>
                        <p class="file-size-limit">Maximum file size: 50MB</p>
                    </div>
                    <input type="file" id="fileInput" accept="image/*,.pdf" hidden>
                </div>
            </section>

            <!-- File Info Section -->
            <section class="file-info-section" id="fileInfoSection" style="display: none;">
                <div class="file-info">
                    <h3>File Information</h3>
                    <div class="file-details">
                        <p><strong>Name:</strong> <span id="fileName"></span></p>
                        <p><strong>Type:</strong> <span id="fileType"></span></p>
                        <p><strong>Size:</strong> <span id="fileSize"></span></p>
                    </div>
                </div>
            </section>

            <!-- Conversion Options -->
            <section class="conversion-section" id="conversionSection" style="display: none;">
                <div class="conversion-options">
                    <h3>Conversion Options</h3>
                    
                    <!-- Output Format Selection (for images) -->
                    <div class="option-group" id="formatGroup" style="display: none;">
                        <label for="outputFormat">Output Format:</label>
                        <select id="outputFormat">
                            <option value="jpg">JPG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                            <option value="bmp">BMP</option>
                            <option value="gif">GIF</option>
                            <option value="tiff">TIFF</option>
                        </select>
                    </div>

                    <!-- Compression Level -->
                    <div class="option-group">
                        <label for="compressionLevel">Compression Level:</label>
                        <select id="compressionLevel">
                            <option value="low">Low (Best Quality)</option>
                            <option value="medium" selected>Medium (Balanced)</option>
                            <option value="high">High (Smallest Size)</option>
                        </select>
                    </div>

                    <!-- Convert Button -->
                    <button class="convert-btn" id="convertBtn">
                        <span class="btn-text">Start Conversion</span>
                        <span class="btn-loader" style="display: none;">‚è≥</span>
                    </button>
                </div>
            </section>

            <!-- Progress Section -->
            <section class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-container">
                    <h3>Processing...</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">Initializing...</p>
                    <div class="progress-percentage" id="progressPercentage">0%</div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="results-container">
                    <h3>Conversion Complete!</h3>
                    <div class="results-info">
                        <div class="size-comparison">
                            <div class="size-item">
                                <span class="label">Original Size:</span>
                                <span id="originalSize"></span>
                            </div>
                            <div class="size-item">
                                <span class="label">New Size:</span>
                                <span id="newSize"></span>
                            </div>
                            <div class="size-item compression-ratio">
                                <span class="label">Compression:</span>
                                <span id="compressionRatio"></span>
                            </div>
                        </div>
                    </div>
                    <div class="download-section">
                        <button class="download-btn" id="downloadBtn">
                            üì• Download File
                        </button>
                        <button class="new-conversion-btn" id="newConversionBtn">
                            üîÑ Convert Another File
                        </button>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section class="error-section" id="errorSection" style="display: none;">
                <div class="error-container">
                    <h3>‚ùå Error</h3>
                    <p class="error-message" id="errorMessage"></p>
                    <button class="retry-btn" id="retryBtn">Try Again</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2025 Kroxx. Built With ‚ù§Ô∏è More Tools Coming Soon.</p>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Processing your file...</p>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>